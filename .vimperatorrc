" clear all key mappings
" to avoid troubles from loading rc file several times
mapclear
cmapclear
imapclear
" clear user-defined commands
comclear

" default search/suggest engine: google
set defsearch=google
set suggestengines=google

set! browser.bookmarks.showRecentlyBookmarked=false

ignorekeys clear
ignorekeys add mail\\.google\\.com -except b,<C-n>,<C-p>,<Space>,<Leader>,:
ignorekeys add www.pathery.com -except b,<C-n>,<C-p>,<Space>,<Leader>,:
ignorekeys add beta.pathery.net -except b,<C-n>,<C-p>,<Space>,<Leader>,:
ignorekeys add blue.pathery.net -except b,<C-n>,<C-p>,<Space>,<Leader>,:
ignorekeys add localhost:3000 -except <C-n>,<C-p>
ignorekeys add vimflowy.bitballoon.com -except <C-n>,<C-p>

" don't focus any "input" elements automatically when open pages.
set focuscontent

" https://github.com/vimperator/vimperator-labs/issues/10
" To Enable map <Space>
js <<EOM
  window.addEventListener('keypress',function (event) {
    var code=event.charCode;
    if ((liberator.mode === modes.INSERT && modes.extended === modes.MENU)
    ||(liberator.mode ==modes.NORMAL && code==32)
    ||(liberator.mode ==modes.COMMAND_LINE && code !=32)){
      let map = mappings.get(liberator.mode, events.toString(event));
      if (map) {
        event.preventDefault();
        event.stopPropagation();
        map.execute();
      }
    }
  },false);
EOM
map <Space> <Leader>

" tab operation {{{2
nnoremap <C-b> b
nnoremap <C-h> gT
nnoremap <C-l> gt
nnoremap <Leader>bp gT
nnoremap <Leader>bn gt
nnoremap <Leader>bl :b#<CR>
noremap <C-j> gt
noremap <C-k> gT
" reorder tabs
noremap <C-p> :tabmove! -1<CR>
noremap <C-n> :tabmove! +1<CR>

nnoremap <Leader>fed :source ~/.vimperatorrc<cr>:echo "Configuration reloaded."<cr>

nnoremap ; :
nnoremap : ;

" Scroll three times faster.
nnoremap j 3j
nnoremap k 3k

" TODO:
" - Calling up Vim itself with C-i in a textarea?
" set editor=/usr/local/bin/vim
" - why does sourcing twice mess things up??
" USEFUL TO LOOK AT: https://github.com/januswel/dotfiles/blob/master/.vimperatorrc
